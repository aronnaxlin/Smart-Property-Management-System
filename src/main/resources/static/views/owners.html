<!-- Search and Filter Bar -->
<div class="sci-card">
    <div class="row" style="align-items: center;">
        <div class="col-6" style="flex:1;">
            <input type="text" id="ownerSearchInput" class="sci-input" placeholder="输入姓名、用户名或手机号搜索...">
        </div>
        <div class="col-3">
            <select id="userTypeFilter" class="sci-input" onchange="filterByUserType()">
                <option value="">全部用户</option>
                <option value="OWNER">仅业主</option>
                <option value="ADMIN">仅管理员</option>
            </select>
        </div>
        <div>
            <button class="sci-btn" onclick="searchOwners()">搜索</button>
            <button class="sci-btn" onclick="showCreateUserModal()" style="margin-left: 10px;">新建用户</button>
            <button class="sci-btn" onclick="exportOwners()" style="margin-left: 10px; background: #016164;">导出CSV</button>
        </div>
    </div>
</div>

<!-- Users/Owners Table -->
<div class="sci-card">
    <div class="card-header">
        <h3>用户/业主管理</h3>
    </div>
    <div class="table-responsive">
        <table class="sci-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>用户名</th>
                    <th>姓名</th>
                    <th>性别</th>
                    <th>电话</th>
                    <th>用户类型</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody id="ownersTableBody">
                <!-- Rows will be injected -->
            </tbody>
        </table>
    </div>
</div>

<!-- Owner Detail Modal (with property information) -->
<div id="ownerDetailModal" class="sci-card" style="display:none; position: fixed; top: 15%; left: 25%; width: 50%; z-index: 100; box-shadow: 0 0 50px rgba(0,0,0,0.8); max-height: 70vh; overflow-y: auto;">
    <div class="card-header">
        <h3>用户详情</h3>
        <button class="sci-btn danger" onclick="closeOwnerModal()">关闭</button>
    </div>
    <div id="ownerDetailContent" style="padding: 20px;"></div>
</div>

<!-- Create/Edit User Modal -->
<div id="userModal" class="sci-card" style="display:none; position: fixed; top: 10%; left: 25%; width: 50%; z-index: 101; box-shadow: 0 0 50px rgba(0,0,0,0.8); max-height: 80vh; overflow-y: auto;">
    <div class="card-header">
        <h3 id="userModalTitle">新建用户</h3>
        <button class="sci-btn danger" onclick="closeUserModal()">关闭</button>
    </div>
    <div style="padding: 20px;">
        <input type="hidden" id="userModalId">

        <div class="form-group" style="margin-bottom:15px">
            <label>用户名 (登录账号):</label>
            <input type="text" id="userModalUserName" class="sci-input" placeholder="输入用户名">
        </div>

        <div class="form-group" style="margin-bottom:15px">
            <label>密码 <span style="color: var(--text-dim); font-size: 0.85rem;">(编辑时留空表示不修改)</span>:</label>
            <input type="password" id="userModalPassword" class="sci-input" placeholder="输入密码">
        </div>

        <div class="form-group" style="margin-bottom:15px">
            <label>真实姓名:</label>
            <input type="text" id="userModalName" class="sci-input" placeholder="输入真实姓名">
        </div>

        <div class="form-group" style="margin-bottom:15px">
            <label>性别:</label>
            <select id="userModalGender" class="sci-input">
                <option value="">请选择</option>
                <option value="男">男</option>
                <option value="女">女</option>
            </select>
        </div>

        <div class="form-group" style="margin-bottom:15px">
            <label>手机号:</label>
            <input type="text" id="userModalPhone" class="sci-input" placeholder="输入手机号">
        </div>

        <div class="form-group" style="margin-bottom:15px">
            <label>用户类型:</label>
            <select id="userModalUserType" class="sci-input">
                <option value="">请选择</option>
                <option value="ADMIN">管理员</option>
                <option value="OWNER">业主</option>
            </select>
        </div>

        <button class="sci-btn" onclick="saveUser()" style="width: 100%;">保存</button>
    </div>
</div>
